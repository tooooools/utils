(function(T,Y){typeof exports=="object"&&typeof module<"u"?Y(exports):typeof define=="function"&&define.amd?define(["exports"],Y):(T=typeof globalThis<"u"?globalThis:T||self,Y(T["@tooooools/utils"]={}))})(this,function(T){"use strict";function Y(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Pe(n){var i=2.5949095;return(n*=2)<1?.5*(n*n*((i+1)*n-i)):.5*((n-=2)*n*((i+1)*n+i)+2)}var Se=Pe;function qe(n){var i=1.70158;return n*n*((i+1)*n-i)}var Re=qe;function Ce(n){var i=1.70158;return--n*n*((i+1)*n+i)+1}var ke=Ce;function Te(n){var i=.36363636363636365,e=8/11,o=9/10,l=4356/361,I=35442/1805,y=16061/1805,O=n*n;return n<i?7.5625*O:n<e?9.075*O-9.9*n+3.4:n<o?l*O-I*n+y:10.8*n*n-20.52*n+10.72}var ee=Te,le=ee;function Ne(n){return n<.5?.5*(1-le(1-n*2)):.5*le(n*2-1)+.5}var De=Ne,je=ee;function Ye(n){return 1-je(1-n)}var Ge=Ye;function Xe(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}var Ue=Xe;function Be(n){return 1-Math.sqrt(1-n*n)}var Ve=Be;function We(n){return Math.sqrt(1- --n*n)}var Le=We;function ze(n){return n<.5?4*n*n*n:.5*Math.pow(2*n-2,3)+1}var Je=ze;function Ze(n){return n*n*n}var He=Ze;function Ke(n){var i=n-1;return i*i*i+1}var Qe=Ke;function en(n){return n<.5?.5*Math.sin(13*Math.PI/2*2*n)*Math.pow(2,10*(2*n-1)):.5*Math.sin(-13*Math.PI/2*(2*n-1+1))*Math.pow(2,-10*(2*n-1))+1}var nn=en;function rn(n){return Math.sin(13*n*Math.PI/2)*Math.pow(2,10*(n-1))}var tn=rn;function sn(n){return Math.sin(-13*(n+1)*Math.PI/2)*Math.pow(2,-10*n)+1}var an=sn;function un(n){return n===0||n===1?n:n<.5?.5*Math.pow(2,20*n-10):-.5*Math.pow(2,10-n*20)+1}var on=un;function fn(n){return n===0?n:Math.pow(2,10*(n-1))}var ln=fn;function cn(n){return n===1?n:1-Math.pow(2,-10*n)}var pn=cn;function hn(n){return n}var gn=hn;function vn(n){return n/=.5,n<1?.5*n*n:(n--,-.5*(n*(n-2)-1))}var $n=vn;function In(n){return n*n}var wn=In;function dn(n){return-n*(n-2)}var bn=dn;function On(n){return n<.5?8*Math.pow(n,4):-8*Math.pow(n-1,4)+1}var Mn=On;function An(n){return Math.pow(n,4)}var yn=An;function xn(n){return Math.pow(n-1,3)*(1-n)+1}var _n=xn;function En(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}var mn=En;function Fn(n){return n*n*n*n*n}var Pn=Fn;function Sn(n){return--n*n*n*n*n+1}var qn=Sn;function Rn(n){return-.5*(Math.cos(Math.PI*n)-1)}var Cn=Rn;function kn(n){var i=Math.cos(n*Math.PI*.5);return Math.abs(i)<1e-14?1:1-i}var Tn=kn;function Nn(n){return Math.sin(n*Math.PI/2)}var Dn=Nn,jn={backInOut:Se,backIn:Re,backOut:ke,bounceInOut:De,bounceIn:Ge,bounceOut:ee,circInOut:Ue,circIn:Ve,circOut:Le,cubicInOut:Je,cubicIn:He,cubicOut:Qe,elasticInOut:nn,elasticIn:tn,elasticOut:an,expoInOut:on,expoIn:ln,expoOut:pn,linear:gn,quadInOut:$n,quadIn:wn,quadOut:bn,quartInOut:Mn,quartIn:yn,quartOut:_n,quintInOut:mn,quintIn:Pn,quintOut:qn,sineInOut:Cn,sineIn:Tn,sineOut:Dn};const Yn=Y(jn);function Gn(n){return{a:parseFloat(n.a),b:parseFloat(n.b),c:parseFloat(n.c),d:parseFloat(n.d),e:parseFloat(n.e),f:parseFloat(n.f)}}const Xn=/^matrix\(\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*,\s*([0-9_+-.e]+)\s*\)$/i;function Un(n){const i=n.match(Xn);if(i===null||i.length<7)throw new Error(`'${n}' is not a matrix`);return{a:parseFloat(i[1]),b:parseFloat(i[2]),c:parseFloat(i[3]),d:parseFloat(i[4]),e:parseFloat(i[5]),f:parseFloat(i[6])}}function G(n){return typeof n>"u"}function q(n,i=0){return{a:1,c:0,e:n,b:0,d:1,f:i}}function U(...n){n=Array.isArray(n[0])?n[0]:n;const i=(e,o)=>({a:e.a*o.a+e.c*o.b,c:e.a*o.c+e.c*o.d,e:e.a*o.e+e.c*o.f+e.e,b:e.b*o.a+e.d*o.b,d:e.b*o.c+e.d*o.d,f:e.b*o.e+e.d*o.f+e.f});switch(n.length){case 0:throw new Error("no matrices provided");case 1:return n[0];case 2:return i(n[0],n[1]);default:{const[e,o,...l]=n,I=i(e,o);return U(I,...l)}}}function B(...n){return U(...n)}const{cos:Bn,sin:Vn,PI:Wn}=Math;function ce(n,i,e){const o=Bn(n),l=Vn(n),I={a:o,c:-l,e:0,b:l,d:o,f:0};return G(i)||G(e)?I:U([q(i,e),I,q(-i,-e)])}function pe(n,i=void 0,e=void 0){return ce(n*Wn/180,i,e)}function N(n,i=void 0,e=void 0,o=void 0){G(i)&&(i=n);const l={a:n,c:0,e:0,b:0,d:i,f:0};return G(e)||G(o)?l:U([q(e,o),l,q(-e,-o)])}function Ln(n,i){return{a:1,c:n,e:0,b:i,d:1,f:0}}const{tan:he}=Math;function zn(n,i){return{a:1,c:he(n),e:0,b:he(i),d:1,f:0}}function ge(n,i){return zn(n*Math.PI/180,i*Math.PI/180)}function Jn(n){return`matrix(${n.a},${n.b},${n.c},${n.d},${n.e},${n.f})`}function Zn(n){return Array.isArray(n)?n.map(i):i(n);function i(e){switch(e.type){case"matrix":if("a"in e&&"b"in e&&"c"in e&&"d"in e&&"e"in e&&"f"in e)return Gn(e);throw new Error("MISSING_MANDATORY_PARAM");case"translate":if(!("tx"in e))throw new Error("MISSING_MANDATORY_PARAM");return"ty"in e?q(e.tx,e.ty):q(e.tx);case"scale":if(!("sx"in e))throw new Error("MISSING_MANDATORY_PARAM");return"sy"in e?N(e.sx,e.sy):N(e.sx);case"rotate":if(!("angle"in e))throw new Error("MISSING_MANDATORY_PARAM");return"cx"in e&&"cy"in e?pe(e.angle,e.cx,e.cy):pe(e.angle);case"skewX":if(!("angle"in e))throw new Error("MISSING_MANDATORY_PARAM");return ge(e.angle,0);case"skewY":if(!("angle"in e))throw new Error("MISSING_MANDATORY_PARAM");return ge(0,e.angle);case"shear":if(!("shx"in e&&"shy"in e))throw new Error("MISSING_MANDATORY_PARAM");return Ln(e.shx,e.shy);default:throw new Error("UNSUPPORTED_DESCRIPTOR")}}}function Hn(n,i){function e(){this.constructor=n}e.prototype=i.prototype,n.prototype=new e}function D(n,i,e,o){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,D.prototype),l.expected=i,l.found=e,l.location=o,l.name="SyntaxError",l}Hn(D,Error);function ne(n,i,e){return e=e||" ",n.length>i?n:(i-=n.length,e+=e.repeat(i),n+e.slice(0,i))}D.prototype.format=function(n){var i="Error: "+this.message;if(this.location){var e=null,o;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){e=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,I=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,y=this.location.source+":"+I.line+":"+I.column;if(e){var O=this.location.end,d=ne("",I.line.toString().length," "),g=e[l.line-1],p=l.line===O.line?O.column:g.length+1,M=p-l.column||1;i+=`
 --> `+y+`
`+d+` |
`+I.line+" | "+g+`
`+d+" | "+ne("",l.column-1," ")+ne("",M,"^")}else i+=`
 at `+y}return i},D.buildMessage=function(n,i){var e={literal:function(g){return'"'+l(g.text)+'"'},class:function(g){var p=g.parts.map(function(M){return Array.isArray(M)?I(M[0])+"-"+I(M[1]):I(M)});return"["+(g.inverted?"^":"")+p.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function o(g){return g.charCodeAt(0).toString(16).toUpperCase()}function l(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+o(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+o(p)})}function I(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(p){return"\\x0"+o(p)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(p){return"\\x"+o(p)})}function y(g){return e[g.type](g)}function O(g){var p=g.map(y),M,S;if(p.sort(),p.length>0){for(M=1,S=1;M<p.length;M++)p[M-1]!==p[M]&&(p[S]=p[M],S++);p.length=S}switch(p.length){case 1:return p[0];case 2:return p[0]+" or "+p[1];default:return p.slice(0,-1).join(", ")+", or "+p[p.length-1]}}function d(g){return g?'"'+l(g)+'"':"end of input"}return"Expected "+O(n)+" but "+d(i)+" found."};function Kn(n,i){i=i!==void 0?i:{};var e={},o=i.grammarSource,l={transformList:de},I=de,y="matrix",O="(",d=")",g="translate",p="scale",M="rotate",S="skewX",V="skewY",W=",",L=".",z=/^[eE]/,re=/^[+\-]/,J=/^[0-9]/,_=/^[ \t\r\n]/,X=F("matrix",!1),R=F("(",!1),E=F(")",!1),C=F("translate",!1),Z=F("scale",!1),te=F("rotate",!1),ur=F("skewX",!1),or=F("skewY",!1),fr=F(",",!1),lr=Cr("fractionalConstant"),$e=F(".",!1),cr=Q(["e","E"],!1,!1),pr=Q(["+","-"],!1,!1),hr=Q([["0","9"]],!1,!1),gr=Q([" ","	","\r",`
`],!1,!1),vr=function(r){return r},$r=function(r,t){return r.concat(t)},Ir=function(r,t,a,u,h,f){return[{type:"matrix",a:r,b:t,c:a,d:u,e:h,f}]},wr=function(r,t){var a={type:"translate",tx:r};return t&&(a.ty=t),[a]},dr=function(r,t){var a={type:"scale",sx:r};return t&&(a.sy=t),[a]},br=function(r,t){var a={type:"rotate",angle:r};return t&&(a.cx=t[0],a.cy=t[1]),[a]},Or=function(r){return[{type:"skewX",angle:r}]},Mr=function(r){return[{type:"skewY",angle:r}]},Ar=function(r){return parseFloat(r.join(""))},yr=function(r){return parseInt(r.join(""))},xr=function(r){return r},_r=function(r,t){return[r,t]},Er=function(r){return r.join("")},mr=function(r,t){return[r,t||null].join("")},Fr=function(r,t){return[r,t].join("")},Pr=function(r,t){return[r?r.join(""):null,".",t.join("")].join("")},Sr=function(r){return r.join("")},qr=function(r,t){return["e",r,t.join("")].join("")},s=0,H=[{line:1,column:1}],m=0,se=[],v=0,K;if("startRule"in i){if(!(i.startRule in l))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');I=l[i.startRule]}function F(r,t){return{type:"literal",text:r,ignoreCase:t}}function Q(r,t,a){return{type:"class",parts:r,inverted:t,ignoreCase:a}}function Rr(){return{type:"end"}}function Cr(r){return{type:"other",description:r}}function Ie(r){var t=H[r],a;if(t)return t;for(a=r-1;!H[a];)a--;for(t=H[a],t={line:t.line,column:t.column};a<r;)n.charCodeAt(a)===10?(t.line++,t.column=1):t.column++,a++;return H[r]=t,t}function we(r,t,a){var u=Ie(r),h=Ie(t),f={source:o,start:{offset:r,line:u.line,column:u.column},end:{offset:t,line:h.line,column:h.column}};return a&&o&&typeof o.offset=="function"&&(f.start=o.offset(f.start),f.end=o.offset(f.end)),f}function w(r){s<m||(s>m&&(m=s,se=[]),se.push(r))}function kr(r,t,a){return new D(D.buildMessage(r,t),r,t,a)}function de(){var r,t,a,u,h;for(r=s,t=[],a=c();a!==e;)t.push(a),a=c();for(a=be(),a===e&&(a=null),u=[],h=c();h!==e;)u.push(h),h=c();return r=vr(a),r}function be(){var r,t,a,u;if(r=s,t=Oe(),t!==e){if(a=[],u=P(),u!==e)for(;u!==e;)a.push(u),u=P();else a=e;a!==e?(u=be(),u!==e?r=$r(t,u):(s=r,r=e)):(s=r,r=e)}else s=r,r=e;return r===e&&(r=Oe()),r}function Oe(){var r;return r=Tr(),r===e&&(r=Nr(),r===e&&(r=Dr(),r===e&&(r=jr(),r===e&&(r=Yr(),r===e&&(r=Gr()))))),r}function Tr(){var r,t,a,u,h,f,A,$,b,ie,_e,ue,Ee,oe,me,fe,Fe,k;if(r=s,n.substr(s,6)===y?(t=y,s+=6):(t=e,v===0&&w(X)),t!==e){for(a=[],u=c();u!==e;)a.push(u),u=c();if(n.charCodeAt(s)===40?(u=O,s++):(u=e,v===0&&w(R)),u!==e){for(h=[],f=c();f!==e;)h.push(f),f=c();if(f=x(),f!==e)if(A=P(),A!==e)if($=x(),$!==e)if(b=P(),b!==e)if(ie=x(),ie!==e)if(_e=P(),_e!==e)if(ue=x(),ue!==e)if(Ee=P(),Ee!==e)if(oe=x(),oe!==e)if(me=P(),me!==e)if(fe=x(),fe!==e){for(Fe=[],k=c();k!==e;)Fe.push(k),k=c();n.charCodeAt(s)===41?(k=d,s++):(k=e,v===0&&w(E)),k!==e?r=Ir(f,$,ie,ue,oe,fe):(s=r,r=e)}else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e;else s=r,r=e}else s=r,r=e}else s=r,r=e;return r}function Nr(){var r,t,a,u,h,f,A,$,b;if(r=s,n.substr(s,9)===g?(t=g,s+=9):(t=e,v===0&&w(C)),t!==e){for(a=[],u=c();u!==e;)a.push(u),u=c();if(n.charCodeAt(s)===40?(u=O,s++):(u=e,v===0&&w(R)),u!==e){for(h=[],f=c();f!==e;)h.push(f),f=c();if(f=x(),f!==e){for(A=Me(),A===e&&(A=null),$=[],b=c();b!==e;)$.push(b),b=c();n.charCodeAt(s)===41?(b=d,s++):(b=e,v===0&&w(E)),b!==e?r=wr(f,A):(s=r,r=e)}else s=r,r=e}else s=r,r=e}else s=r,r=e;return r}function Dr(){var r,t,a,u,h,f,A,$,b;if(r=s,n.substr(s,5)===p?(t=p,s+=5):(t=e,v===0&&w(Z)),t!==e){for(a=[],u=c();u!==e;)a.push(u),u=c();if(n.charCodeAt(s)===40?(u=O,s++):(u=e,v===0&&w(R)),u!==e){for(h=[],f=c();f!==e;)h.push(f),f=c();if(f=x(),f!==e){for(A=Me(),A===e&&(A=null),$=[],b=c();b!==e;)$.push(b),b=c();n.charCodeAt(s)===41?(b=d,s++):(b=e,v===0&&w(E)),b!==e?r=dr(f,A):(s=r,r=e)}else s=r,r=e}else s=r,r=e}else s=r,r=e;return r}function jr(){var r,t,a,u,h,f,A,$,b;if(r=s,n.substr(s,6)===M?(t=M,s+=6):(t=e,v===0&&w(te)),t!==e){for(a=[],u=c();u!==e;)a.push(u),u=c();if(n.charCodeAt(s)===40?(u=O,s++):(u=e,v===0&&w(R)),u!==e){for(h=[],f=c();f!==e;)h.push(f),f=c();if(f=x(),f!==e){for(A=Xr(),A===e&&(A=null),$=[],b=c();b!==e;)$.push(b),b=c();n.charCodeAt(s)===41?(b=d,s++):(b=e,v===0&&w(E)),b!==e?r=br(f,A):(s=r,r=e)}else s=r,r=e}else s=r,r=e}else s=r,r=e;return r}function Yr(){var r,t,a,u,h,f,A,$;if(r=s,n.substr(s,5)===S?(t=S,s+=5):(t=e,v===0&&w(ur)),t!==e){for(a=[],u=c();u!==e;)a.push(u),u=c();if(n.charCodeAt(s)===40?(u=O,s++):(u=e,v===0&&w(R)),u!==e){for(h=[],f=c();f!==e;)h.push(f),f=c();if(f=x(),f!==e){for(A=[],$=c();$!==e;)A.push($),$=c();n.charCodeAt(s)===41?($=d,s++):($=e,v===0&&w(E)),$!==e?r=Or(f):(s=r,r=e)}else s=r,r=e}else s=r,r=e}else s=r,r=e;return r}function Gr(){var r,t,a,u,h,f,A,$;if(r=s,n.substr(s,5)===V?(t=V,s+=5):(t=e,v===0&&w(or)),t!==e){for(a=[],u=c();u!==e;)a.push(u),u=c();if(n.charCodeAt(s)===40?(u=O,s++):(u=e,v===0&&w(R)),u!==e){for(h=[],f=c();f!==e;)h.push(f),f=c();if(f=x(),f!==e){for(A=[],$=c();$!==e;)A.push($),$=c();n.charCodeAt(s)===41?($=d,s++):($=e,v===0&&w(E)),$!==e?r=Mr(f):(s=r,r=e)}else s=r,r=e}else s=r,r=e}else s=r,r=e;return r}function x(){var r,t,a,u;return r=s,t=s,a=ae(),a===e&&(a=null),u=Br(),u!==e?(a=[a,u],t=a):(s=t,t=e),t!==e&&(t=Ar(t)),r=t,r===e&&(r=s,t=s,a=ae(),a===e&&(a=null),u=Ur(),u!==e?(a=[a,u],t=a):(s=t,t=e),t!==e&&(t=yr(t)),r=t),r}function Me(){var r,t,a;return r=s,t=P(),t!==e?(a=x(),a!==e?r=xr(a):(s=r,r=e)):(s=r,r=e),r}function Xr(){var r,t,a,u,h;return r=s,t=P(),t!==e?(a=x(),a!==e?(u=P(),u!==e?(h=x(),h!==e?r=_r(a,h):(s=r,r=e)):(s=r,r=e)):(s=r,r=e)):(s=r,r=e),r}function P(){var r,t,a,u,h;if(r=s,t=[],a=c(),a!==e)for(;a!==e;)t.push(a),a=c();else t=e;if(t!==e){for(a=Ae(),a===e&&(a=null),u=[],h=c();h!==e;)u.push(h),h=c();t=[t,a,u],r=t}else s=r,r=e;if(r===e)if(r=s,t=Ae(),t!==e){for(a=[],u=c();u!==e;)a.push(u),u=c();t=[t,a],r=t}else s=r,r=e;return r}function Ae(){var r;return n.charCodeAt(s)===44?(r=W,s++):(r=e,v===0&&w(fr)),r}function Ur(){var r,t;return r=s,t=j(),t!==e&&(t=Er(t)),r=t,r}function Br(){var r,t,a;return r=s,t=Vr(),t!==e?(a=ye(),a===e&&(a=null),r=mr(t,a)):(s=r,r=e),r===e&&(r=s,t=j(),t!==e?(a=ye(),a!==e?r=Fr(t,a):(s=r,r=e)):(s=r,r=e)),r}function Vr(){var r,t,a,u;return v++,r=s,t=j(),t===e&&(t=null),n.charCodeAt(s)===46?(a=L,s++):(a=e,v===0&&w($e)),a!==e?(u=j(),u!==e?r=Pr(t,u):(s=r,r=e)):(s=r,r=e),r===e&&(r=s,t=j(),t!==e?(n.charCodeAt(s)===46?(a=L,s++):(a=e,v===0&&w($e)),a!==e?r=Sr(t):(s=r,r=e)):(s=r,r=e)),v--,r===e&&(t=e,v===0&&w(lr)),r}function ye(){var r,t,a,u;return r=s,z.test(n.charAt(s))?(t=n.charAt(s),s++):(t=e,v===0&&w(cr)),t!==e?(a=ae(),a===e&&(a=null),u=j(),u!==e?r=qr(a,u):(s=r,r=e)):(s=r,r=e),r}function ae(){var r;return re.test(n.charAt(s))?(r=n.charAt(s),s++):(r=e,v===0&&w(pr)),r}function j(){var r,t;if(r=[],t=xe(),t!==e)for(;t!==e;)r.push(t),t=xe();else r=e;return r}function xe(){var r;return J.test(n.charAt(s))?(r=n.charAt(s),s++):(r=e,v===0&&w(hr)),r}function c(){var r;return _.test(n.charAt(s))?(r=n.charAt(s),s++):(r=e,v===0&&w(gr)),r}if(K=I(),K!==e&&s===n.length)return K;throw K!==e&&s<n.length&&w(Rr()),kr(se,m<n.length?n.charAt(m):null,m<n.length?we(m,m+1):we(m,m))}function Qn(n){return Kn(n)}function er(n,i=!1,e=!1){i?e?n=B(n,N(-1,-1)):n=B(n,N(1,-1)):e&&(n=B(n,N(-1,1)));const o=n.a,l=n.b,I=n.c,y=n.d;let O,d,g;if(o!==0||I!==0){const p=Math.hypot(o,I);O=p,d=(o*y-l*I)/p;const M=Math.acos(o/p);g=I>0?-M:M}else if(l!==0||y!==0){const p=Math.hypot(l,y);O=(o*y-l*I)/p,d=p;const M=Math.acos(l/p);g=Math.PI/2+(y>0?-M:M)}else O=0,d=0,g=0;return e&&(O=-O),i&&(d=-d),{translate:{tx:n.e,ty:n.f},scale:{sx:O,sy:d},rotation:{angle:g}}}function nr(n,i,e){return Math.max(i,Math.min(n,e))}function rr(n,i,e){return n+e*(i-n)}function tr(n){return n*Math.PI/180}const sr=["translateX","translateY","rotate","scale","scaleX","scaleY"],ve=(n,i,e)=>Array.isArray(n)?n.map((o,l)=>ve(o,i[l],e)):rr(n,i,e);function ar(n,{decimals:i=3,close:e=!0}={}){let o="";for(let l=0;l<n.length+(e?1:0);l++)o+=l?" L ":"M ",o+=n[l%n.length][0].toFixed(i)+" "+n[l%n.length][1].toFixed(i);return e&&(o+=" Z"),o}class ir{constructor({interpolations:i={},loop:e=!1,duration:o=0,frameRate:l=60}={}){this.props={interpolations:i,duration:o,frameRate:l,loop:e},this.length=this.toFrames(o)}get interpolations(){return this.props.interpolations}set interpolations(i){this.props.interpolations=i}get frameRate(){return this.props.frameRate}set loop(i){this.props.loop=i}get loop(){return this.props.loop}toFrames(i=0){const[,e,o]=/([-+]?[0-9.]+)([a-z%]*)/.exec(i)??[parseFloat(i)];if(!o)return e;let l=1;return o==="ms"&&(l=1e3),Math.floor(e/l*this.props.frameRate)}apply(i,e=null){for(const o in this.props.interpolations){const l=i.querySelectorAll(o);if(!l)continue;let I=0;const y=this.props.interpolations[o].span?this.toFrames(this.props.interpolations[o].span??0)/l.length:this.toFrames(this.props.interpolations[o].stagger??0);for(const O of l){for(let d in this.props.interpolations[o]){if(d==="stagger")continue;const{initial:g,from:p,to:M,delay:S,duration:V,easing:W}=this.props.interpolations[o][d],L=this.toFrames(V??this.length),z=this.toFrames(S??0)+I,re=nr((e-z)/L,0,1),J=Yn[W??"linear"];if(!J)throw new Error(`easing function '${W}' does not exist. See https://github.com/mattdesl/eases for available functions.`);let _=ve(e<z&&g!==void 0?g:p,M,J(re));if(sr.includes(d)){const X=O.getAttribute("transform")??"translate(0,0)",R=/^matrix/i.test(X)?Un(X):Zn(Qn(X))[0],{translate:E,scale:C,rotation:Z}=er(R??q(0));switch(d){case"translateX":E.tx=_;break;case"translateY":E.ty=_;break;case"scale":C.sx=_,C.sy=_;break;case"scaleX":C.sx=_;break;case"scaleY":C.sy=_;break;case"rotate":Z.angle=tr(_);break}const te=B(q(E.tx??0,E.ty??0),N(C.sx??1,C.sy??1),ce(Z.angle??0));d="transform",_=Jn(te)}d==="d"&&(_=ar(_)),O.setAttribute(d,_)}I+=y}}}toJSON(){return this.props}}T.SVGTimeline=ir,Object.defineProperty(T,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.cjs.map
